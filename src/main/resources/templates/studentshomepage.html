<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Student Profile</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
        }
        body {
            font-family: 'Montserrat', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e0e7ff 0%, #f4f8fb 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .fade-in {
            animation: fadeIn 1.2s cubic-bezier(.39,.575,.565,1) both;
        }
        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(40px);}
            100% { opacity: 1; transform: translateY(0);}
        }
        .profile-container {
            max-width: 520px;
            margin: 60px auto 40px auto;
            background: #fff;
            border-radius: 22px;
            box-shadow: 0 8px 32px rgba(106,130,251,0.13), 0 1.5px 8px rgba(252,92,125,0.07);
            padding: 48px 40px 38px 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            transition: box-shadow 0.3s;
        }
        .profile-container:hover {
            box-shadow: 0 12px 40px rgba(106,130,251,0.18), 0 2px 12px rgba(252,92,125,0.10);
        }
        .avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6a82fb 0%, #fc5c7d 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 54px;
            color: #fff;
            margin-bottom: 28px;
            box-shadow: 0 4px 18px rgba(106,130,251,0.18);
            font-weight: 700;
            letter-spacing: 2px;
            border: 4px solid #fff;
            transition: transform 0.3s;
            animation: popIn 0.8s cubic-bezier(.39,.575,.565,1) both;
        }
        @keyframes popIn {
            0% { transform: scale(0.7);}
            100% { transform: scale(1);}
        }
        .student-name {
            font-size: 2.1rem;
            font-weight: 700;
            color: #2d3e50;
            margin-bottom: 10px;
            letter-spacing: 1px;
            text-align: center;
            animation: fadeIn 1.2s 0.2s both;
        }
        .student-roll {
            font-size: 1.13rem;
            color: #6a7b8c;
            margin-bottom: 28px;
            letter-spacing: 0.5px;
            animation: fadeIn 1.2s 0.3s both;
        }
        .info-list {
            width: 100%;
            list-style: none;
            padding: 0;
            margin: 0 0 28px 0;
        }
        .info-list li {
            display: flex;
            align-items: center;
            padding: 14px 0;
            border-bottom: 1px solid #f1f5f9;
            opacity: 0;
            animation: fadeIn 0.8s forwards;
        }
        .info-list li:nth-child(1) { animation-delay: 0.35s;}
        .info-list li:nth-child(2) { animation-delay: 0.45s;}
        .info-list li:nth-child(3) { animation-delay: 0.55s;}
        .info-list li:nth-child(4) { animation-delay: 0.65s;}
        .info-list li:nth-child(5) { animation-delay: 0.75s;}
        .info-list li:nth-child(6) { animation-delay: 0.85s;}
        .info-label {
            width: 140px;
            color: #7b8ca7;
            font-weight: 600;
            letter-spacing: 0.2px;
        }
        .info-value {
            color: #2d3e50;
            font-weight: 400;
            word-break: break-word;
        }
        .edit-btn {
            margin-top: 22px;
            padding: 12px 36px;
            background: linear-gradient(90deg, #6a82fb 0%, #fc5c7d 100%);
            color: #fff;
            border: none;
            border-radius: 28px;
            font-size: 1.08rem;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.2s, transform 0.18s;
            box-shadow: 0 2px 12px rgba(106,130,251,0.10);
            letter-spacing: 0.5px;
            outline: none;
            position: relative;
            overflow: hidden;
        }
        .edit-btn:after {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 100%;
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
            z-index: 0;
        }
        .edit-btn:hover:after {
            width: 220%;
            height: 600%;
        }
        .edit-btn:hover {
            background: linear-gradient(90deg, #fc5c7d 0%, #6a82fb 100%);
            transform: translateY(-2px) scale(1.04);
        }
        .not-found {
            max-width: 500px;
            margin: 100px auto;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(106,130,251,0.13);
            padding: 48px 38px 36px 38px;
            text-align: center;
            color: #d9534f;
            font-size: 1.35rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            animation: fadeIn 1.2s both;
        }
        /* Attendance chart styles */
        .attendance-chart-container {
            margin-top: 36px;
            width: 100%;
            background: linear-gradient(120deg, #f9fafb 80%, #eaf0fb 100%);
            border-radius: 14px;
            padding: 28px 20px 22px 20px;
            box-shadow: 0 2px 12px rgba(106,130,251,0.08);
            animation: fadeIn 1.2s 0.9s both;
        }
        .attendance-chart-title {
            font-size: 1.22rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: #2d3e50;
            letter-spacing: 0.2px;
        }
        .attendance-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .attendance-table th, .attendance-table td {
            padding: 9px 12px;
            text-align: center;
            border-bottom: 1px solid #e5e9f2;
        }
        .attendance-table th {
            background: #eaf0fb;
            color: #6a82fb;
            font-weight: 600;
        }
        .present {
            color: #28a745;
            font-weight: 700;
        }
        .absent {
            color: #d9534f;
            font-weight: 700;
        }
        .na {
            color: #888;
            font-style: italic;
        }
        .attendance-summary {
            margin-top: 16px;
            font-size: 1.03rem;
            color: #4a5668;
        }
        .month-select-form {
            margin-bottom: 18px;
            text-align: right;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 10px;
            flex-wrap: wrap;
        }
        .month-select-form label {
            font-weight: 500;
            color: #6a82fb;
            margin-right: 4px;
        }
        .month-select-form select {
            padding: 5px 10px;
            border-radius: 7px;
            border: 1px solid #bfc9e0;
            background: #fff;
            font-size: 1rem;
            font-family: inherit;
            transition: border 0.2s;
        }
        .month-select-form select:focus {
            border: 1.5px solid #6a82fb;
            outline: none;
        }
        .month-select-form button {
            padding: 6px 18px;
            border-radius: 7px;
            border: none;
            background: linear-gradient(90deg, #6a82fb 0%, #fc5c7d 100%);
            color: #fff;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s, transform 0.15s;
            box-shadow: 0 1px 6px rgba(106,130,251,0.08);
        }
        .month-select-form button:hover {
            background: linear-gradient(90deg, #fc5c7d 0%, #6a82fb 100%);
            transform: scale(1.04);
        }
        /* Responsive */
        @media (max-width: 600px) {
            .profile-container {
                max-width: 98vw;
                padding: 28px 8vw 22px 8vw;
            }
            .attendance-chart-container {
                padding: 18px 4vw 14px 4vw;
            }
            .not-found {
                max-width: 98vw;
                padding: 28px 8vw 22px 8vw;
            }
        }
    </style>
</head>
<body>
    <div th:if="${singleStudent == null}" class="not-found fade-in">
        Student record doesn't exist.
    </div>
    <div th:if="${singleStudent != null}" class="profile-container fade-in">
        <div class="avatar" th:text="${singleStudent.name.substring(0,1)}">S</div>
        <div class="student-name" th:text="${singleStudent.name}">Student Name</div>
        <div class="student-roll" th:text="'Roll No: ' + ${singleStudent.rollno}">Roll No: 12345</div>
        <ul class="info-list">
            <li>
                <span class="info-label">Phone:</span>
                <span class="info-value" th:text="${singleStudent.phone}">+91-9876543210</span>
            </li>
            <li>
                <span class="info-label">Email:</span>
                <span class="info-value" th:text="${singleStudent.email}">student@email.com</span>
            </li>
            <li>
                <span class="info-label">Age:</span>
                <span class="info-value" th:text="${singleStudent.age}">18</span>
            </li>
            <li>
                <span class="info-label">Standard:</span>
                <span class="info-value" th:text="${singleStudent.standard}">12</span>
            </li>
            <li>
                <span class="info-label">Section:</span>
                <span class="info-value" th:text="${singleStudent.section}">A</span>
            </li>
            <li>
                <span class="info-label">Address:</span>
                <span class="info-value" th:text="${singleStudent.address}">123 Main St, City</span>
            </li>
        </ul>
        <button class="edit-btn" onclick="editProfileAnimation(this)">Edit Profile</button>

        <!-- Attendance Chart Request Form -->
        <div class="attendance-chart-container">
            <div class="attendance-chart-title">View Monthly Attendance</div>
            <form class="month-select-form" method="get" action="/studentspage/getSingleStudentInfo/attendance/chart">
                <input type="hidden" name="studentId" th:value="${singleStudent.id}" />
                <label for="year">Year:</label>
                <select name="year" id="year" required>
                    <option value="2025">2025</option>
                    <option value="2024">2024</option>
                    <option value="2023">2023</option>
                    <option value="2022">2022</option>
                </select>
                <label for="month">Month:</label>
                <select name="month" id="month" required>
                    <option value="1">January</option>
                    <option value="2">February</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5">May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>
                <button type="submit">Show Attendance</button>
            </form>
        </div>
        <!-- End Attendance Chart Request Form -->
    </div>
    <script>
        // Button click animation
        function editProfileAnimation(btn) {
            btn.style.transform = "scale(0.96)";
            setTimeout(() => {
                btn.style.transform = "scale(1)";
                // You can redirect or open edit modal here
                // window.location.href = '/edit-profile-url';
            }, 180);
        }
    </script>
</body>
</html>